{"ast":null,"code":"import _slicedToArray from\"/home/lorelai/Schreibtisch/WebDev/Collective-App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import NavbarVisitor from\"../components/NavbarVisitor\";import DateFilterEvent from\"../components/DateFilterEvent\";import SearchBarEvent from\"../components/SearchBarEvent\";import{useState,useEffect}from\"react\";import ToggleEvent from\"../components/ToggleEvent\";import axios from'axios';import{Link}from\"react-router-dom\";import TypeFilterEvent from\"../components/TypeFilterEvent\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EventsVisitors(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),eventDate=_useState6[0],setEventDate=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toggle=_useState8[0],setToggle=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),type=_useState10[0],setType=_useState10[1];var storedToken=localStorage.getItem('authToken');//get events from backend\nvar getAllEvents=function getAllEvents(){axios.get(\"/api/event/\",{headers:{Authorization:\"Bearer \".concat(storedToken)}}).then(function(response){console.log('response.data',response.data);setEvents(response.data);}).catch(function(err){console.log(err);});};useEffect(function(){getAllEvents();},[]);var handleClean=function handleClean(){setEventDate('');};var filteredEvents;if(events){filteredEvents=events.filter(function(event){return event.eventName.toLowerCase().includes(query);});}if(events&&eventDate){filteredEvents=filteredEvents.filter(function(event){return event.eventDate===eventDate;});}if(toggle){filteredEvents=filteredEvents.filter(function(event){return event.eventOutdoor===true;});}if(type!==''){filteredEvents=filteredEvents.filter(function(event){return event.eventType.toLowerCase()===type.toLowerCase();});}if(events===null){return/*#__PURE__*/_jsx(_Fragment,{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavbarVisitor,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-overlay-event\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"events-view-back\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter-title\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Find your event\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(DateFilterEvent,{eventDate:eventDate,setEventDateProp:setEventDate}),/*#__PURE__*/_jsx(\"button\",{className:\"glow-on-events\",onClick:handleClean,children:\"Reset date\"}),/*#__PURE__*/_jsx(SearchBarEvent,{setQueryProp:setQuery}),/*#__PURE__*/_jsx(TypeFilterEvent,{type:type,setTypeProp:setType}),/*#__PURE__*/_jsx(ToggleEvent,{setCheckProp:setToggle})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-detail-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"event-heading\",children:\"UPCOMING EVENTS\"}),filteredEvents.map(function(event){return/*#__PURE__*/_jsxs(\"div\",{className:\"events-view-ind-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"events-view-image-box\",children:event.eventPicture}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"event-title\",children:event.eventName}),/*#__PURE__*/_jsx(\"div\",{className:\"event-description\",children:event.eventDescription}),/*#__PURE__*/_jsx(\"div\",{children:event.eventType}),/*#__PURE__*/_jsx(\"div\",{children:event.eventDate}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr\"}),/*#__PURE__*/_jsx(Link,{className:\"event-link\",to:\"/events/\".concat(event._id),children:\"Details\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr\"})]})]},event._id);})]})]})})]});}","map":{"version":3,"sources":["/home/lorelai/Schreibtisch/WebDev/Collective-App/client/src/pagesVisitor/Events.js"],"names":["React","NavbarVisitor","DateFilterEvent","SearchBarEvent","useState","useEffect","ToggleEvent","axios","Link","TypeFilterEvent","EventsVisitors","events","setEvents","query","setQuery","eventDate","setEventDate","toggle","setToggle","type","setType","storedToken","localStorage","getItem","getAllEvents","get","headers","Authorization","then","response","console","log","data","catch","err","handleClean","filteredEvents","filter","event","eventName","toLowerCase","includes","eventOutdoor","eventType","map","eventPicture","eventDescription","_id"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport NavbarVisitor from \"../components/NavbarVisitor\";\nimport DateFilterEvent from \"../components/DateFilterEvent\";\nimport SearchBarEvent from \"../components/SearchBarEvent\";\nimport { useState, useEffect } from \"react\";\nimport ToggleEvent from \"../components/ToggleEvent\";\nimport axios from 'axios'\nimport { Link } from \"react-router-dom\";\nimport TypeFilterEvent from \"../components/TypeFilterEvent\";\n\n\n\nexport default function EventsVisitors(){\n\n    \n\n    const [events, setEvents] = useState(null)\n    const [query, setQuery] = useState('')\n    const [eventDate ,setEventDate] = useState('')\n    const [toggle, setToggle] = useState(false)\n    const [type, setType] = useState('')\n\n    \n\n    const storedToken = localStorage.getItem('authToken')\n\n    //get events from backend\n\n    const getAllEvents =() => {\n\n        axios.get(`/api/event/`, {headers: {Authorization: `Bearer ${storedToken}`}})\n        .then(response => {\n          console.log('response.data',response.data)\n          setEvents(response.data)\n        })\n       .catch(err => {console.log(err) })\n   }\n\n   useEffect(()=> {getAllEvents()}, [])\n\n   const handleClean = () => {\n       setEventDate('')\n   }\n\n    let filteredEvents;\n\n    if(events){\n    filteredEvents = events.filter(event =>{\n       return event.eventName.toLowerCase().includes(query)\n    })}\n\n    \n    if(events && eventDate){\n        filteredEvents = filteredEvents.filter(event =>{\n            return event.eventDate === eventDate\n         })\n    }\n\n    if(toggle){\n         filteredEvents = filteredEvents.filter(event =>{\n            return event.eventOutdoor === true\n        })\n    }\n    \n    if(type !== ''){\n       filteredEvents = filteredEvents.filter( event =>{\n           return event.eventType.toLowerCase() === type.toLowerCase()\n       })\n    }\n   \n    \n    if(events === null){\n        return <>Loading...</>\n    }\n    \n    return(\n    <>\n        <div>\n            <NavbarVisitor />\n        </div>\n        <div className=\"bg-overlay-event\">\n        <div className=\"events-view-back\">\n            <div className=\"filters-box\">\n                <div className=\"filter-title\">\n                    <p>Find your event</p>\n                </div>\n                <div>\n                    <DateFilterEvent eventDate={eventDate} setEventDateProp={setEventDate}/>\n                    <button className='glow-on-events' onClick={handleClean}>Reset date</button> \n                    <SearchBarEvent setQueryProp={setQuery}/>\n                    <TypeFilterEvent type={type} setTypeProp={setType}/>\n                    <ToggleEvent setCheckProp={setToggle}/>\n                </div> \n            </div>\n            <div className=\"event-detail-container\">\n                <h2 className=\"event-heading\">UPCOMING EVENTS</h2>\n            {filteredEvents.map(event =>{\n            return(\n                <div key={event._id} className='events-view-ind-box'>\n                <div className=\"events-view-image-box\">{event.eventPicture}</div>\n                <div>\n                    <h3 className=\"event-title\">{event.eventName}</h3>\n                    <div className=\"event-description\">{event.eventDescription}</div>\n                    <div>{event.eventType}</div>\n                    <div>{event.eventDate}</div>\n                    <hr className=\"hr\"></hr>  \n                    <Link className=\"event-link\" to={`/events/${event._id}`}>Details</Link>\n                    <hr className=\"hr\"></hr>\n                </div>\n                </div>)\n            })}\n\n                \n            </div>\n        </div>\n        </div>\n    </>\n    )\n}"]},"metadata":{},"sourceType":"module"}