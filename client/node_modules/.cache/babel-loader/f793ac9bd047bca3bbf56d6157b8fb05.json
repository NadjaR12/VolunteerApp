{"ast":null,"code":"import _slicedToArray from\"/home/lorelai/Schreibtisch/WebDev/Collective-App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import axios from'axios';import PopUpEditProject from'./PopUpEditProject';import PopUpCreateProject from'./PopUpCreateProject';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProjectList(props){// State of Projects\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCreateProject=_useState4[0],setShowCreateProject=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),projectToBeEdited=_useState6[0],setProjectToBeEdited=_useState6[1];var storedToken=localStorage.getItem('authToken');// Handle PopUp\nvar handleProjectToBeEdited=function handleProjectToBeEdited(project){console.log('project',project);setProjectToBeEdited(project);};// get all projects from the backend\nvar getAllProjects=function getAllProjects(){// request 'api/projects'\n// for every request to a project route we need to also send the token\naxios.get('/api/projects',{headers:{Authorization:\"Bearer \".concat(storedToken)}}).then(function(response){console.log('response.data',response.data);// set the state of projects\nsetProjects(response.data);}).catch(function(err){console.log(err);});};useEffect(function(){getAllProjects();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dash-title-box\",children:[\"Projects\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"create-btn\",onClick:function onClick(){return setShowCreateProject(!showCreateProject);},children:\"+\"}),showCreateProject&&/*#__PURE__*/_jsx(PopUpCreateProject,{refreshProjects:getAllProjects,handleClose:function handleClose(){return setShowCreateProject(false);}})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"drop-down-btn\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-arrow\",src:\"/images/drop-down-arrow.png\",alt:\"pfeil\"})})})]}),/*#__PURE__*/_jsx(\"div\",{children:projects.map(function(project){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dash-list-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dash-list-title\",children:project.projectName}),/*#__PURE__*/_jsxs(\"div\",{className:\"dash-btn-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"dash-btn\",onClick:function onClick(){handleProjectToBeEdited(project);},children:\"Edit\"}),projectToBeEdited&&/*#__PURE__*/_jsx(PopUpEditProject,{handleClose:function handleClose(){setProjectToBeEdited(null);},thisproject:projectToBeEdited,refreshProjects:getAllProjects}),/*#__PURE__*/_jsx(\"button\",{className:\"dash-btn\",onClick:function onClick(){axios.delete(\"/api/projects/\".concat(project._id),{headers:{Authorization:\"Bearer \".concat(storedToken)}}).then(function(deletedProject){console.log('deletedProject',deletedProject);// get all projects to show immediately list of projects without deleted item\ngetAllProjects();}).catch(function(err){return console.log(err);});},children:\"Delete\"})]})]},project._id),/*#__PURE__*/_jsx(\"div\",{className:\"vol-link-container\",children:/*#__PURE__*/_jsx(Link,{className:\"vol-link-dash\",to:\"/behind-the-scences/project/volunteer/\".concat(project._id),children:\"See Applications\"})})]});})})]});}","map":{"version":3,"sources":["/home/lorelai/Schreibtisch/WebDev/Collective-App/client/src/components/ProjectList.js"],"names":["React","useEffect","useState","Link","axios","PopUpEditProject","PopUpCreateProject","ProjectList","props","projects","setProjects","showCreateProject","setShowCreateProject","projectToBeEdited","setProjectToBeEdited","storedToken","localStorage","getItem","handleProjectToBeEdited","project","console","log","getAllProjects","get","headers","Authorization","then","response","data","catch","err","map","projectName","delete","_id","deletedProject"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport axios from 'axios'\nimport PopUpEditProject from './PopUpEditProject'\nimport PopUpCreateProject from './PopUpCreateProject'\n\n\nexport default function ProjectList(props){\n// State of Projects\nconst [projects, setProjects] = useState([])\nconst [showCreateProject, setShowCreateProject] = useState(false)\nconst [projectToBeEdited, setProjectToBeEdited] = useState(null)\n\nconst storedToken = localStorage.getItem('authToken')\n// Handle PopUp\nconst handleProjectToBeEdited = project => {\n  console.log('project', project)\n  setProjectToBeEdited(project)}\n\n// get all projects from the backend\nconst getAllProjects = () => {\n  // request 'api/projects'\n  // for every request to a project route we need to also send the token\n  axios.get('/api/projects', { headers: { Authorization: `Bearer ${storedToken}` } })\n      .then(response => {\n          console.log('response.data',response.data)\n          // set the state of projects\n          setProjects(response.data)\n      })\n      .catch(err => {\n          console.log(err)\n      })\n}\nuseEffect(() => {getAllProjects()}, [])\n\n    return(\n      <>\n          <div>\n            <div  className='dash-title-box'>\n              Projects\n            <div>\n              <button className='create-btn' onClick={() => setShowCreateProject(!showCreateProject)}>+</button>\n                {showCreateProject && (\n                  <PopUpCreateProject refreshProjects={getAllProjects} handleClose={() => setShowCreateProject(false)}/>\n                )}\n            </div>\n            </div>\n            <div>\n              <button className='drop-down-btn'><img className=\"img-arrow\" src=\"/images/drop-down-arrow.png\" alt=\"pfeil\"></img></button>\n            </div>\n          </div>\n          <div>\n            {projects.map(project => {\n                return (\n                <>\n                <div key={project._id} className='dash-list-item'>\n                  <div className='dash-list-title'>{project.projectName}</div>\n                  <div className='dash-btn-container'>\n                    <button className='dash-btn' onClick={() => {handleProjectToBeEdited(project)}}>Edit</button>\n                      {projectToBeEdited && <PopUpEditProject\n                     handleClose={() => {setProjectToBeEdited(null)}} thisproject={projectToBeEdited} refreshProjects={getAllProjects}/>\n                      }\n                    <button className='dash-btn' onClick={()=>{\n                      axios.delete(`/api/projects/${project._id}`, { headers: { Authorization: `Bearer ${storedToken}` } })\n                      .then(deletedProject => {\n                        console.log('deletedProject', deletedProject)\n                        // get all projects to show immediately list of projects without deleted item\n                        getAllProjects();\n                        })\n                      .catch(err => console.log(err))\n                    }}>Delete</button>\n                  </div>\n                  </div>\n                  <div className='vol-link-container'>\n                    <Link className='vol-link-dash' to={`/behind-the-scences/project/volunteer/${project._id}`}>See Applications</Link>\n                  </div>\n                </>\n                )}\n                )}\n                \n          </div>\n      </>\n    )  \n}"]},"metadata":{},"sourceType":"module"}