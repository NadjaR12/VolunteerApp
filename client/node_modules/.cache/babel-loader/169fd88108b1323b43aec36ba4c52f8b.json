{"ast":null,"code":"import _slicedToArray from\"/home/lorelai/Schreibtisch/Ironhack/w8 Project3/Collective-App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import PopupCreateEvent from'./PopupCreateEvent';import PopupEditEvent from'./PopUpEditEvent';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function EventList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCreateEvent=_useState4[0],setShowCreateEvent=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),eventToEdit=_useState6[0],setEventToEdit=_useState6[1];var storedToken=localStorage.getItem('authToken');//popup handle\nvar handlePopupEdit=function handlePopupEdit(event){setEventToEdit(event);};//get events from backend\nvar getAllEvents=function getAllEvents(){axios.get(\"/api/event/\",{headers:{Authorization:\"Bearer \".concat(storedToken)}}).then(function(response){console.log('response.data',response.data);setEvents(response.data);}).catch(function(err){console.log(err);});};useEffect(function(){getAllEvents();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dash-title-box-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dash-titles\",children:\"Events\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button-create\",onClick:function onClick(){return setShowCreateEvent(!showCreateEvent);},children:\"CreateEvent\"}),showCreateEvent&&/*#__PURE__*/_jsx(PopupCreateEvent,{refreshEvents:getAllEvents,handleClose:function handleClose(){return setShowCreateEvent(false);}})]})]}),/*#__PURE__*/_jsx(\"div\",{children:events.map(function(event){return/*#__PURE__*/_jsxs(\"div\",{className:\"dash.list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:event.eventName}),/*#__PURE__*/_jsx(\"button\",{className:\"dash-edit-button\",onClick:function onClick(){handlePopupEdit(event);},children:\"Edit\"}),eventToEdit&&/*#__PURE__*/_jsx(PopupEditEvent,{handleClose:function handleClose(){setEventToEdit(null);},thisevent:eventToEdit,refreshEvents:getAllEvents}),/*#__PURE__*/_jsx(\"button\",{className:\"dash-delete-button\",onClick:function onClick(){axios.delete(\"/api/event/\".concat(event._id),{headers:{Authorization:\"Bearer \".concat(storedToken)}}).then(function(deletedProject){console.log('deletedEvent',deletedProject);// get all projects to show immediately list of projects without deleted item\ngetAllEvents();}).catch(function(err){return console.log(err);});},children:\"Delete\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"dash-line\"})]},event._id);})})]});}","map":{"version":3,"sources":["/home/lorelai/Schreibtisch/Ironhack/w8 Project3/Collective-App/client/src/components/EventList.js"],"names":["React","useEffect","useState","axios","PopupCreateEvent","PopupEditEvent","EventList","events","setEvents","showCreateEvent","setShowCreateEvent","eventToEdit","setEventToEdit","storedToken","localStorage","getItem","handlePopupEdit","event","getAllEvents","get","headers","Authorization","then","response","console","log","data","catch","err","map","eventName","delete","_id","deletedProject"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport PopupCreateEvent from './PopupCreateEvent'\nimport PopupEditEvent from './PopUpEditEvent'\n\n\n\n\nexport default function EventList() {\n    \n    const [events, setEvents] = useState([])\n    const [showCreateEvent, setShowCreateEvent] = useState(false)\n    const [eventToEdit, setEventToEdit] = useState(null)\n    \n    const storedToken = localStorage.getItem('authToken')\n    \n    //popup handle\n    const handlePopupEdit = event => {\n      setEventToEdit(event)\n    }\n    \n    //get events from backend\n    const getAllEvents =() => {\n\n      axios.get(`/api/event/`, {headers: {Authorization: `Bearer ${storedToken}`}})\n      .then(response => {\n        console.log('response.data',response.data)\n        setEvents(response.data)\n      })\n      .catch(err => {console.log(err) })\n    }\n    \n   useEffect(() => {\n     getAllEvents()          \n    }, [])\n    \n    \n    return(\n        <>\n          <div className='dash-title-box-2'>\n            <div className='dash-titles'>\n              Events\n            </div>\n            <div>\n              <button className='button-create' onClick={()=> setShowCreateEvent(!showCreateEvent)}>CreateEvent</button>\n                {showCreateEvent && (\n                <PopupCreateEvent refreshEvents={getAllEvents} handleClose={() => setShowCreateEvent(false)}/>\n              )}\n            </div>\n          </div>\n          <div>\n            {events.map(event=>\n              <div className='dash.list' key={event._id}>\n                <h3>{event.eventName}</h3>\n                <button className='dash-edit-button' onClick={()=> {handlePopupEdit(event)}}>Edit</button>\n                  {eventToEdit && <PopupEditEvent\n                  handleClose={() => {setEventToEdit(null)}} thisevent={eventToEdit} refreshEvents={getAllEvents}/>\n                  }\n                <button className='dash-delete-button' onClick={()=>{\n                    axios.delete(`/api/event/${event._id}`, { headers: { Authorization: `Bearer ${storedToken}` } })\n                      .then(deletedProject => {\n                        console.log('deletedEvent', deletedProject)\n                        // get all projects to show immediately list of projects without deleted item\n                        getAllEvents();\n                        })\n                      .catch(err => console.log(err))\n                  }}>Delete</button>\n                  <hr className='dash-line'></hr>\n            </div>)}\n          </div>\n        </>\n    )  \n}"]},"metadata":{},"sourceType":"module"}